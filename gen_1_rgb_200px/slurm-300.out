THIS WORKS!!!
evaluate_train.py
history.csv
history.json
model.h5
model.json
performance_plot.png
slurm-300.out
slurm.sh
train.py
webcam.py
slurmstepd: error: execve(): source: No such file or directory
srun: error: gpu1: task 0: Exited with exit code 2
2021-03-10 22:21:59.669026: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudart.so.10.2
WARNING: Logging before flag parsing goes to stderr.
W0310 22:22:00.636860 22668427437888 __init__.py:332] Limited tf.compat.v2.summary API due to missing TensorBoard installation.
W0310 22:22:00.645938 22668427437888 __init__.py:332] Limited tf.compat.v2.summary API due to missing TensorBoard installation.
W0310 22:22:00.646478 22668427437888 __init__.py:332] Limited tf.compat.v2.summary API due to missing TensorBoard installation.
W0310 22:22:00.658612 22668427437888 __init__.py:365] Limited tf.summary API due to missing TensorBoard installation.
2021-03-10 22:22:52.724251: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcuda.so.1
2021-03-10 22:22:52.823762: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1716] Found device 0 with properties: 
pciBusID: 0000:17:00.0 name: Quadro RTX 6000 computeCapability: 7.5
coreClock: 1.77GHz coreCount: 72 deviceMemorySize: 23.65GiB deviceMemoryBandwidth: 625.94GiB/s
2021-03-10 22:22:52.824633: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1716] Found device 1 with properties: 
pciBusID: 0000:25:00.0 name: Quadro RTX 6000 computeCapability: 7.5
coreClock: 1.77GHz coreCount: 72 deviceMemorySize: 23.65GiB deviceMemoryBandwidth: 625.94GiB/s
2021-03-10 22:22:52.824671: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudart.so.10.2
2021-03-10 22:22:52.840802: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcublas.so.10
2021-03-10 22:22:52.842734: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcufft.so.10
2021-03-10 22:22:52.844248: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcurand.so.10
2021-03-10 22:22:52.845887: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcusolver.so.10
2021-03-10 22:22:52.846859: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcusparse.so.10
2021-03-10 22:22:52.850229: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudnn.so.7
2021-03-10 22:22:52.853260: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1858] Adding visible gpu devices: 0, 1
2021-03-10 22:22:53.099051: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1716] Found device 0 with properties: 
pciBusID: 0000:17:00.0 name: Quadro RTX 6000 computeCapability: 7.5
coreClock: 1.77GHz coreCount: 72 deviceMemorySize: 23.65GiB deviceMemoryBandwidth: 625.94GiB/s
2021-03-10 22:22:53.099884: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1716] Found device 1 with properties: 
pciBusID: 0000:25:00.0 name: Quadro RTX 6000 computeCapability: 7.5
coreClock: 1.77GHz coreCount: 72 deviceMemorySize: 23.65GiB deviceMemoryBandwidth: 625.94GiB/s
2021-03-10 22:22:53.099933: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudart.so.10.2
2021-03-10 22:22:53.099998: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcublas.so.10
2021-03-10 22:22:53.100016: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcufft.so.10
2021-03-10 22:22:53.100031: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcurand.so.10
2021-03-10 22:22:53.100046: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcusolver.so.10
2021-03-10 22:22:53.100062: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcusparse.so.10
2021-03-10 22:22:53.100078: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudnn.so.7
2021-03-10 22:22:53.103023: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1858] Adding visible gpu devices: 0, 1
2021-03-10 22:22:53.103063: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudart.so.10.2
2021-03-10 22:22:53.823769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1257] Device interconnect StreamExecutor with strength 1 edge matrix:
2021-03-10 22:22:53.823834: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1263]      0 1 
2021-03-10 22:22:53.823843: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1276] 0:   N Y 
2021-03-10 22:22:53.823848: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1276] 1:   Y N 
2021-03-10 22:22:53.829288: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1402] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 22501 MB memory) -> physical GPU (device: 0, name: Quadro RTX 6000, pci bus id: 0000:17:00.0, compute capability: 7.5)
2021-03-10 22:22:53.832013: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1402] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 22501 MB memory) -> physical GPU (device: 1, name: Quadro RTX 6000, pci bus id: 0000:25:00.0, compute capability: 7.5)
(18968, 200, 200, 3)
(4742, 200, 200, 3)
(18968,)
(4742,)
TRAINING
Model: "sequential"
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
conv2d (Conv2D)              (None, 198, 198, 32)      896       
_________________________________________________________________
max_pooling2d (MaxPooling2D) (None, 99, 99, 32)        0         
_________________________________________________________________
conv2d_1 (Conv2D)            (None, 97, 97, 64)        18496     
_________________________________________________________________
max_pooling2d_1 (MaxPooling2 (None, 48, 48, 64)        0         
_________________________________________________________________
conv2d_2 (Conv2D)            (None, 46, 46, 128)       73856     
_________________________________________________________________
max_pooling2d_2 (MaxPooling2 (None, 23, 23, 128)       0         
_________________________________________________________________
conv2d_3 (Conv2D)            (None, 21, 21, 128)       147584    
_________________________________________________________________
max_pooling2d_3 (MaxPooling2 (None, 10, 10, 128)       0         
_________________________________________________________________
flatten (Flatten)            (None, 12800)             0         
_________________________________________________________________
dense (Dense)                (None, 512)               6554112   
_________________________________________________________________
dense_1 (Dense)              (None, 2)                 1026      
=================================================================
Total params: 6,795,970
Trainable params: 6,795,970
Non-trainable params: 0
_________________________________________________________________
Traceback (most recent call last):
  File "train.py", line 117, in <module>
    history = model.fit(X_train, y_train, batch_size=batch_size, epochs=epochs, validation_split=0.1)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/keras/engine/training.py", line 108, in _method_wrapper
    return method(self, *args, **kwargs)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/keras/engine/training.py", line 1049, in fit
    data_handler = data_adapter.DataHandler(
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/keras/engine/data_adapter.py", line 1105, in __init__
    self._adapter = adapter_cls(
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/keras/engine/data_adapter.py", line 265, in __init__
    x, y, sample_weights = _process_tensorlike((x, y, sample_weights))
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/keras/engine/data_adapter.py", line 1021, in _process_tensorlike
    inputs = nest.map_structure(_convert_numpy_and_scipy, inputs)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/util/nest.py", line 635, in map_structure
    structure[0], [func(*x) for x in entries],
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/util/nest.py", line 635, in <listcomp>
    structure[0], [func(*x) for x in entries],
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/keras/engine/data_adapter.py", line 1016, in _convert_numpy_and_scipy
    return ops.convert_to_tensor(x, dtype=dtype)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/framework/ops.py", line 1499, in convert_to_tensor
    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/framework/tensor_conversion_registry.py", line 52, in _default_conversion_function
    return constant_op.constant(value, dtype, name=name)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/framework/constant_op.py", line 263, in constant
    return _constant_impl(value, dtype, shape, name, verify_shape=False,
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/framework/constant_op.py", line 275, in _constant_impl
    return _constant_eager_impl(ctx, value, dtype, shape, verify_shape)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/framework/constant_op.py", line 300, in _constant_eager_impl
    t = convert_to_eager_tensor(value, ctx, dtype)
  File "/opt/spack_home/arch_skylake_avx512/spack_repo/var/spack/environments/python-cuda-ml-20-11/.spack-env/view/lib/python3.8/site-packages/tensorflow/python/framework/constant_op.py", line 98, in convert_to_eager_tensor
    return ops.EagerTensor(value, ctx.device_name, dtype)
MemoryError: Unable to allocate 7.63 GiB for an array with shape (17071, 200, 200, 3) and data type float32
srun: error: gpu1: task 0: Exited with exit code 1
